package main

import (
	//	"bytes"
	"encoding/hex"
	"fmt"
	//	"sort"
	//	"math"
	"time"
	//	"fmt"
	//	"strconv"

	"github.com/tarm/goserial"
	//	"gopkg.in/redis.v5"
)

var ser = &serial.Config{Name: "/dev/ttyUSB0", Baud: 115200}
var s, _ = serial.OpenPort(ser)

//var cha1 = make(chan string, 10)

func main() {

	for {
		var shoplist []string

		fmt.Println("开始")
		//读写器查询标签指令（快速）
		data := []byte{0x06, 0x00, 0x01, 0x01, 0xff, 0x6c, 0x47}
		//读写器查询标签指令（慢速）
		//		data := []byte{0x06, 0x00, 0x01, 0x04, 0xff, 0xd4, 0x39}
		s.Write(data)
		time.Sleep(800000000)
		buf := make([]byte, 8192)
		n, _ := s.Read(buf)
		p := hex.EncodeToString(buf)

		len_str := n*2 - 16

		data1 := Substr(p, 0, n*2)
		fmt.Println(data1)
		//		var temp string
		for a := 0; a < len_str/44; a++ {
			tag_1 := Substr(data1, 44*a+14, 24)
			for _, i := range shoplist {
				if tag_1 == i {
					continue
				} else {
					break
				}
			}

			shoplist = append(shoplist, tag_1)

		}
		fmt.Println(shoplist)
	}
}


//e20060081314001917405d8a
//e200600813140239174060fa
//e20060081314014017505f6f
//e2006008131402151740609a
//e20060081314019917306059
//e20060081314012517505f33
//e20060081314010817505eef
//e200600813140225173060c1
//e20060081314011517505f0b
//e20060081314016217305fc5
//e20060081314010717505eeb
//e20060081314012617505f37
//e20060081314015617505faf
//e200600813140282173061a5
//e20060081314003017305db5
//e20060081314003817405dd6
//e20060081314025917306149
//e2006008131402161730609d
//e20060081314016017405fbe
//e20060081314006717505e4b
//e200600813140238174060f6
//e20060081314009517305eb9
//e20060081314007917305e79
//e200600813140235173060e9
//e20060081314017317505ff3
//e20060081314026517306161
//e20060081314015017405f96
//e2006008131402631740615a
//e20060081314017417505ff7
//e20060081314012617405f36
//e200600813140217173060a1
//e20060081314004117206238
//e20060081314007817405e76
//e2006008131402001740605e
//e20060081314015017505f97
//e20060081314008617405e96
//e20060081314017717406002
//4b1500010301010ce2006008
//fa1500010301010ce2006008
//571500010301010ce2006008
//db1500010301010ce2006008
//541500010301010ce2006008
//9a1500010301010ce2006008
//521500010301010ce2006008
//e21500010301010ce2006008
//0c1500010301010ce2006008
//081500010301010ce2006008
//781500010301010ce2006008
//461500010301010ce2006008
//281500010301010ce2006008
//6b1500010301010ce2006008
//961500010301010ce2006008
//911500010301010ce2006008
//301500010301010ce2006008
//001500010301010ce2006008
//651500010301010ce2006008
//d91500010301010ce2006008
//b11500010301010ce2006008
//071500010301010ce2006008
//571500010301010ce2006008
//bf1500010301010ce2006008
//f61500010301010ce2006008
//371500010301010ce2006008
//6a1500010301010ce2006008
//6b1500010301010ce2006008
//5e1500010301010ce2006008
//291500010301010ce2006008
//cb1500010301010ce2006008
//741500010301010ce2006008
//c31500010301010ce2006008
//101500010301010ce2006008
//491500010301010ce2006008
//ba1500010301010ce2006008
//ae1500010301010ce2006008
//301500010301010ce2006008

/////////////////////

//e20060081314010417305edd
//e20060081314009517305eb9
//e20060081314013817305f65
//e20060081314011417305f05
//e200600813140225174060c2
//e20060081314014417305f7d
//e20060081314013717305f61
//e20060081314011917305f19
//e20060081314005417305e15
//e200600813140235173060e9
//e20060081314015117305f99
//e20060081314025917306149
//e20060081314015617505faf
//e20060081314012717305f39
//e20060081314019117306039
//e20060081314002917305db1
//e20060081314009017505ea7
//e20060081314010717505eeb
//e20060081314012817305f3d
//e20060081314017717406002
//e20060081314016817305fdd
//e20060081314026517306161
//e20060081314019717506053
//e20060081314006717505e4b
//e20060081314011517505f0b
//e20060081314014917505f93
//e2006008131401921730603d
//e20060081314015017505f97
//e20060081314007817405e76
//e20060081314014017405f6e
//e20060081314020117406062
//e200600813140224173060bd
//e2006008131402031750606b
//e2006008131402001730605d
//e20060081314015517505fab
//e2006008131402001740605e
//e20060081314006617505e47
//e20060081314010117505ed3
//e200600813140225173060c1
//e20060081314012617505f37
//e20060081314002717505dab
//e20060081314003717405dd2
//e20060081314018517306021
//e20060081314016417505fcf
//e2006008131402161730609d
//e20060081314006717405e4a
//e20060081314002017405d8e
//e20060081314021017306085
//e20060081314018517406022
//e2006008131402481730611d
//e20060081314007917305e79
//e20060081314004017305ddd
//e200600813140235173060e9
//e20060081314005417305e15
//e20060081314007217305e5d
//e20060081314011317305f01
//e20060081314003017305db5
//e20060081314011417305f05
//e20060081314016117305fc1
//e20060081314010417305edd
//e20060081311011314907d61
//e20060081314008017305e7d
//e20060081314009017305ea5
//e20060081314011517505f0b
//e20060081314007117305e59
//e20060081314005317305e11
//e200600813140282173061a5
//e20060081314017617305ffd
//e20060081314014317305f79
//e20060081314006517305e41
//e20060081314008917305ea1
//e20060081314015217305f9d
//e20060081314012017305f1d
//e20060081314014917505f93
//e20060081314014417305f7d
//e20060081314018617306025
//e20060081314015117305f99
//e20060081314009617305ebd
//e20060081314013817305f65
//e20060081314016817305fdd
//e20060081314013917505f6b
//e20060081314011917305f19
//e20060081314012717305f39
//e20060081314019117306039
//e20060081314009517305eb9
//e20060081314013117505f4b
//e20060081314016217305fc5
//e200600813140225174060c2
//e20060081314025917306149
//e20060081314003917305dd9
//e20060081314026517306161
//e2006008131401801750600f

//1500010301010ce2006008131402481730611d41cae4
//1500010301010ce20060081314003817405dd63be79d
//1500010301010ce2006008131402151740609a379846
//1500010301010ce200600813140257174061422c6a29
//1500010301010ce20060081314007817405e7631f770
//1500010301010ce20060081314016417505fcf30e4f9
//1500010301010ce20060081314010117405ed23670b3
//1500010301010ce20060081314013117505f4b32bc65
//1500010301010ce20060081314003717405dd2315468
//1500010301010ce20060081314012517505f332dd2e1
//1500010301010ce20060081314002917405db2311376
//1500010301010ce20060081314020917406082387a96
//1500010301010ce20060081314011917305f193603fe
//1500010301010ce20060081314011517405f0a345909
//1500010301010ce20060081314013717305f613f04e1
//1500010301010ce200600813140259173061493b1bca
//1500010301010ce2006008131402411730610138ce13
//1500010301010ce200600813140283174061aa3b623f
//1500010301010ce20060081314006717405e4a325722
//1500010301010ce20060081314002717505dab3c7c15





//0700010101001e4b


//0700010201007aa4050001f8690f





//1500010301010ce20060081314011417305f0548146d
//1500010301010ce2006008131401851740602249b3c7
//1500010301010ce20060081314012017305f1d5e8e94
//1500010301010ce20060081314009017305ea559e413
//1500010301010ce20060081314014317305f79542db2
//1500010301010ce20060081314010417305edd546e3e
//1500010301010ce2006008131402481740611e406e85
//1500010301010ce200600813140214174060963488d9
//1500010301010ce20060081314016817305fdd4b813a
//1500010301010ce20060081314017617305ffd4f8424
//1500010301010ce20060081314013817305f654ac79f
//1500010301010ce20060081314019917306059401f67
//1500010301010ce2006008131402641740615e411566
//1500010301010ce2006008131401841740601e47e435
//1500010301010ce20060081314010117405ed242d386
//1500010301010ce200600813140185173060214817a6
//1500010301010ce20060081314014417305f7d4bea21
//1500010301010ce20060081314016117305fc14626f8
//1500010301010ce20060081314015117305f994936da
//1500010301010ce20060081314008017305e7d544a1b
//1500010301010ce2006008131402151740609a40a041
//1500010301010ce20060081314016217305fc53f7d7d
//1500010301010ce2006008131402631740615a3ed496
//1500010301010ce20060081314015017505f973cc3f9
//1500010301010ce20060081314010317305ed9536031
//1500010301010ce200600813140259173061493909e9
//1500010301010ce2006008131402161730609d3fe0d1
//1500010301010ce200600813140284174061ae408789
//1500010301010ce2006008131402491740612240479e
//1500010301010ce20060081314011017405ef645a4f0
//1500010301010ce20060081314021117306089470fc0
//1500010301010ce200600813140235173060e94dcc9f
//1500010301010ce20060081314010917405ef248e22b
//1500010301010ce2006008131402081740607e42249b
//1500010301010ce2006008131402751740618a3f2c82
//1500010301010ce2006008131402761740618e4e3f8b
//1500010301010ce200600813140240173060fd424c44
//1500010301010ce2006008131402001730605d49b157
//1500010301010ce20060081314018617306025388dbe
//1500010301010ce200600813140217173060a142ab62
//1500010301010ce2006008131402481730611d480b79
//1500010301010ce20060081314013317405f52499621
//1500010301010ce20060081314013717305f6138bb95
//1500010301010ce20060081314011317305f0141648b
//1500010301010ce20060081314017517305ff94c027d
//1500010301010ce200600813140283173061a9462de7
//1500010301010ce200600813140209174060823dd7c1
//1500010301010ce200600813140258173061453c2f13
//1500010301010ce20060081314013417405f5640e6c7
//[e2006008131402481730611d e20060081314003817405dd6 e2006008131402151740609a e20060081314025717406142 e20060081314007817405e76 e20060081314016417505fcf e20060081314010117405ed2 e20060081314013117505f4b e20060081314003717405dd2 e20060081314012517505f33 e20060081314002917405db2 e20060081314020917406082 e20060081314011917305f19 e20060081314011517405f0a e20060081314013717305f61 e20060081314025917306149 e20060081314024117306101 e200600813140283174061aa e20060081314006717405e4a e20060081314002717505dab 4b1500010301010ce2006008 6d1500010301010ce2006008 c71500010301010ce2006008 941500010301010ce2006008 131500010301010ce2006008 b21500010301010ce2006008 3e1500010301010ce2006008 851500010301010ce2006008 d91500010301010ce2006008 3a1500010301010ce2006008 241500010301010ce2006008 9f1500010301010ce2006008 671500010301010ce2006008 661500010301010ce2006008 351500010301010ce2006008 861500010301010ce2006008 a61500010301010ce2006008 211500010301010ce2006008 f81500010301010ce2006008 da1500010301010ce2006008 1b1500010301010ce2006008 411500010301010ce2006008 7d1500010301010ce2006008 961500010301010ce2006008 f91500010301010ce2006008 311500010301010ce2006008 e91500010301010ce2006008 d11500010301010ce2006008 891500010301010ce2006008 9e1500010301010ce2006008 f01500010301010ce2006008 c01500010301010ce2006008 9f1500010301010ce2006008 2b1500010301010ce2006008 9b1500010301010ce2006008 821500010301010ce2006008 8b1500010301010ce2006008 441500010301010ce2006008 571500010301010ce2006008 be1500010301010ce2006008 621500010301010ce2006008 791500010301010ce2006008 211500010301010ce2006008 951500010301010ce2006008 8b1500010301010ce2006008 7d1500010301010ce2006008 e71500010301010ce2006008 c11500010301010ce2006008 131500010301010ce2006008]









1500010301010ce20060081314011017405ef64009a7
1500010301010ce200600813140273173061813ca016
1500010301010ce20060081314015017505f97396eae
1500010301010ce20060081314013417405f5640e6c7
1500010301010ce200600813140214174060963501c8
1500010301010ce2006008131402761740618e4809ee
1500010301010ce20060081314003917305dd93ac851
1500010301010ce2006008131402151740609a3a7d9d
1500010301010ce20060081314011517405f0a345909
1500010301010ce2006008131402721730617d3c23c7
1500010301010ce20060081314015217305f9d39acc2
1500010301010ce20060081314005417405e163689d5
1500010301010ce20060081314016117405fc2403ded
1500010301010ce20060081314019917306059462902
1500010301010ce2006008131401851730602145f27d
1500010301010ce2006008131402631740615a3cc6b5
1500010301010ce20060081314018517406022483ad6
1500010301010ce2006008131402581730614534679f
1500010301010ce20060081314020917406082387a96
1500010301010ce20060081314007817405e76345a27
1500010301010ce2006008131402751740618a3b08c4
1500010301010ce20060081314002917405db236ac02
1500010301010ce2006008131402641740615e3e65ed
1500010301010ce20060081314003817405dd63dd1f8
1500010301010ce20060081314002717505dab385853
1500010301010ce20060081314013117505f4b371132
1500010301010ce20060081314012517505f3336804f
1500010301010ce2006008131402161730609d3c7be3
1500010301010ce200600813140259173061493a92db
1500010301010ce2006008131401801750600f36ae08
1500010301010ce20060081314016717305fd9387421
1500010301010ce20060081314012017305f1d5b23c3
1500010301010ce20060081314008017305e7d565838
1500010301010ce2006008131402761740618e4a1bcd
1500010301010ce20060081314009017305ea55c4944
1500010301010ce2006008131402491740612241ce8f
1500010301010ce20060081314016117305fc14434db
1500010301010ce20060081314015017505f973cc3f9
1500010301010ce20060081314021117306089470fc0
1500010301010ce2006008131401851740602249b3c7
1500010301010ce200600813140209174060823a68b5
1500010301010ce2006008131402721730617d40c87e
1500010301010ce20060081314016817305fdd499319
1500010301010ce2006008131402641740615e428e54
1500010301010ce2006008131402081740607e43ad8a
1500010301010ce200600813140283173061a945b6d5
1500010301010ce20060081314019917306059438455
1500010301010ce20060081314010417305edd4f3c90
1500010301010ce2006008131401911730603945bf74
1500010301010ce20060081314011017405ef6442de1
1500010301010ce20060081314013817305f65495cad
1500010301010ce200600813140259173061493eb69d
1500010301010ce2006008131402631740615a3f5d87
1500010301010ce20060081314015117305f99474833
1500010301010ce20060081314014317305f79563f91
1500010301010ce20060081314010917405ef2496b3a
1500010301010ce2006008131402001730605d43ebf8
1500010301010ce200600813140225173060c13e9371
1500010301010ce2006008131401851730602146694f
1500010301010ce20060081314021017306085397df7
1500010301010ce20060081314017617305ffd4d9607
1500010301010ce2006008131402151740609a412950
1500010301010ce20060081314010317305ed9517212
1500010301010ce2006008131402481740611e3d0c2d
1500010301010ce200600813140265173061613c73a5
1500010301010ce2006008131401841740601e47e435
1500010301010ce200600813140233174060e2422cc1
1500010301010ce20060081314016117405fc23d5f45
1500010301010ce20060081314013317405f52499621
1500010301010ce20060081314015217305f9d3a37f0
1500010301010ce20060081314017517305ff94bbd09
1500010301010ce20060081314013417405f56416fd6
1500010301010ce2006008131402141740609638e413
1500010301010ce200600813140235173060e94c458e
1500010301010ce20060081314011317305f0140ed9a
1500010301010ce200600813140284174061ae3de521
1500010301010ce2006008131402751740618a3d3ea1
1500010301010ce2006008131402481730611d467590
1500010301010ce20060081314014417305f7d49f802
1500010301010ce20060081314010117405ed23da30d
1500010301010ce200600813140217173060a13c52f8
1500010301010ce20060081314002717505dab39d142





















